---
title: Sprint2. El Cerebro en la oficina 
description: En este sprint se deberán diseñar los equipos de la oficina, desde los equipos de desarrollo (Standard Dev) hasta las estaciones de entrenamiento (Workstation AI)
---

Partimos del supuesto de que debeis planificar la infraestructura *hardware* necesaria de una empresa dedicada al desarrollo de aplicaciones de inteligencia artificial específicas para clientes de diversos sectores. 

En este sprint nos centraremos en identificar y presupuestar los requerimientos de los equipos que se van a utilizar para crear aplicaciones de IA; desde los equipos de desarrollo (Standard Dev) hasta las estaciones de entrenamiento (Workstation AI). 

Para hacer una primera aproximación de los requerimientos vamos a basarnos en el **volumen de datos**, la **complejidad del modelo** y el **tiempo de entrenamiento** de una supuesta aplicación de clasificación de imágenes para identificar diferentes tipos de residuos (plástico, papel, vidrio, orgánico y otros) a partir de imágenes capturadas por cámaras en puntos de recogida.

- ***Dataset.*** Supongamos que queremos identificar las 5 categorías de residuos a partir de imágenes capturadas por cámaras HD en puntos de recogida. Para que sea fiable, necesitamos al menos 10.000 imágenes por categoría. Si cada imagen en HD ocupa unos 2 MB, el conjunto de datos estaría formado por 50.000 imágenes, lo que supone un tamaño total aproximado de 100 GB.   
- **RAM.** Aunque no carguemos las 100GB de golpe, el sistema operativo y las librerías de Python (como TensorFlow o Pandas) consumen mucha memoria. Podemos utilizar la fórmula:  
  `RAM (GB) = Tamaño del lote del dataset (GB) x 2 + Sistema operativo (GB)`  Esta fórmula es una aproximación orientativa.
- **Potencia de cálculo**. Las GPUs son esenciales para el entrenamiento de modelos de IA. Si debemos entrenar un modelo en un tiempo razonable (por ejemplo, menos de 5 horas), necesitaremos una GPU potente. Si nuestra GPU potente tarda 3 minutos en realizar una época de entrenamiento y necesitamos 100 épocas, el tiempo total de entrenamiento sería de 300 minutos (5 horas). En el otro extremo, si tenemos una GPU básica que tarda 60 minutos por época, el tiempo total sería de 6000 minutos (100 horas).
- **VRAM.**  El tamaño de memoria de la GPU (VRAM) debe ser al menos igual al tamaño del lote del dataset. En la VRAM se almacenan también los modelos y los cálculos intermedios. Si el modelo estándar utilizado para el reconocimiento de imágenes (YOLOv8 Large) ocupa unos 1.2GB y los cálculos intermedios (gradientes y optimizador) ocupan aproximadamente el doble del tamaño del lote, podemos usar la fórmula:  
  `VRAM (GB) = Tamaño del lote del dataset (GB) + Tamaño del modelo (GB) + Cálculos intermedios (GB)`   
- **Fuente de alimentación**. Necesitamos una fuente de alimentación que pueda suministrar suficiente potencia para todos los componentes del sistema. Si el consumo pico del sistema (CPU+GPU) es de 700W, se debería añadir +30% de margen de seguridad, por lo que la fuente debería ser de al menos 910W.

## Sesión 1. CPUs

Al analizar un procesador (CPU), hay varios factores clave que debes tener en cuenta para comprender su rendimiento y cómo se adapta a tus necesidades.

### 1. Arquitectura del Procesador

Como introdujimos en el sprint anterior, la arquitectura del procesador se refiere al diseño y la estructura interna del CPU.

Las arquitectura más conocida por el usuario son x86 (Intel y AMD) y ARM (ampliamente utilizado en dispositivos móviles, desde 2020, *Apple* ha empezado a utilizar sus propios procesadores basados en ARM para sus portátiles, la serie M (M1, M2, ...))

#### Arquitectura x86

- **Diseño CISC** (Complex Instruction Set Computing): Esta arquitectura se caracteriza por un conjunto de instrucciones complejo, lo que permite ejecutar operaciones multifacéticas en una sola instrucción.
- Fabricantes principales: **Intel** y **AMD** son los desarrolladores más destacados de procesadores x86.
- Dispositivos comunes: Predominantemente utilizada en ordenadores de escritorio, portátiles y servidores, donde el rendimiento y la compatibilidad son primordiales.

#### Arquitectura ARM

- **Diseño RISC** (Reduced Instruction Set Computing): Se enfoca en un conjunto de instrucciones más simple y eficiente, optimizando el consumo energético y el rendimiento por vatio.
- Fabricantes principales: ARM Holdings licencia su arquitectura a diversos fabricantes, entre ellos **Qualcomm**, **Apple**, **Samsung** y **NVIDIA**.
- Dispositivos comunes: Ampliamente implementada en dispositivos móviles como smartphones y tabletas, así como en sistemas embebidos y, más recientemente, en algunos portátiles y servidores debido a su eficiencia energética.

#### Diferencias claves

- Eficiencia energética: Los procesadores ARM suelen consumir menos energía, lo que los hace ideales para dispositivos móviles y aplicaciones donde la duración de la batería es crucial.  
- Rendimiento: Los procesadores x86 ofrecen un alto rendimiento y son compatibles con una amplia gama de aplicaciones de escritorio y servidor.   
- Compatibilidad de software: La arquitectura x86 tiene una larga trayectoria en el mercado de PC, lo que garantiza una amplia compatibilidad con software existente. ARM está ganando terreno, especialmente con sistemas operativos y aplicaciones diseñadas específicamente para su arquitectura.   


### 2. Frecuencia de reloj

La frecuencia de los procesadores se mide en gigahercios (GHz), que representan miles de millones de ciclos por segundo. Un procesador de 3.5 GHz, por ejemplo, ejecuta 3,500 millones de ciclos cada segundo.

Cuanto mayor es la frecuencia en GHz, más rápido puede ejecutar operaciones, aunque esto no siempre implica mayor rendimiento general (depende de otros factores como la arquitectura del procesador y la eficiencia energética).

### 3. Número de núcleos (*Cores*)

Un núcleo es una unidad de procesamiento independiente dentro del procesador. Cuantos más núcleos tenga un procesador, más tareas puede manejar simultáneamente. Procesadores con múltiples núcleos (dual-core, quad-core, octa-core, etc.) son mejores para multitarea y aplicaciones que requieren procesamiento paralelo.

!!! warning "Importante"

    Con el lanzamiento de los procesadores Intel Core de 12ª Generación (*Alder Lake*), Intel dio un gran paso adelante en esta filosofía, presentando dos tipos diferentes de núcleos dentro de un mismo procesador.

    - Los **P-Cores** se llaman así porque la P viene de Performance, rendimiento en inglés.   
    - Los **E-Cores** se llaman así porque la E viene de Efficiency, eficiencia en inglés.  
    - **LP E-Core**, que sería un núcleo de ultra-bajo consumo.   

    Actualmente, Intel está en la 14ª generación de procesadores, conocida como **Raptor Lake Refresh**, con hasta 24 nucleos (8 P-Cores + 16 E-Cores).

    Intel también tiene otras líneas de procesadores, como los procesadores Intel Xeon para servidores y estaciones de trabajo.  Sin embargo, la línea **Intel Core** es la más conocida y utilizada en ordenadores de sobremesa y portátiles.

### 4. Número de Hilos (Threads)

Los hilos son las unidades más pequeñas que gestionan las tareas dentro de un núcleo. Algunos procesadores tienen tecnología de multithreading (como *Hyper-Threading de Intel*) que permite a un núcleo manejar más de un hilo simultáneamente.

Más hilos permiten un mejor rendimiento en aplicaciones multitarea y tareas que se benefician del paralelismo, como edición de video o renderizado 3D.

**Solo los P-core tienen hilos**

### 5. Memoria Caché

La caché es una memoria muy rápida integrada en la CPU para almacenar datos e instrucciones de uso frecuente.
Tipos:

- **L1**: Pequeña y ultrarrápida, cercana a los núcleos.
- **L2**: Un poco más grande y más lenta que L1.
- **L3**: Compartida entre todos los núcleos, más lenta pero de mayor capacidad.

La caché ayuda a acelerar el acceso a datos y reduce la necesidad de ir a la RAM para obtener información, mejorando el rendimiento general.

![Jerarquía de memoria cache](./assets/jerarquiacache.webp){.center width=60%}

### 6. Proceso de fabricación (*nm*)

Se refiere al tamaño de los transistores en el procesador, medido en nanómetros (nm). Cuanto menor sea el tamaño, más transistores caben en el chip, lo que permite aumentar la eficiencia energética y el rendimiento.

Los procesadores actuales suelen estar por debajo de 10nm. Intel y AMD utilizan tecnologías de 7nm y 5nm en sus procesadores más recientes.

### 7. TDP (Thermal Design Power)

Medida en vatios, indica la cantidad de calor que el procesador disipa bajo carga máxima.
Un TDP más alto implica mayor consumo de energía y la necesidad de mejores soluciones de refrigeración. Es relevante para saber qué tipo de sistema de refrigeración necesitarás.

### 8. Compatibilidad con Memoria RAM

Los procesadores están diseñados para trabajar con ciertos tipos y velocidades de memoria RAM (por ejemplo, DDR4, DDR5).
Cuanto más rápida y avanzada sea la memoria RAM que soporta, mejor será el rendimiento en tareas intensivas en memoria.

### 9. GPU Integrada

La mayoría de los procesadores modernos incluyen una GPU integrada, que es útil para tareas gráficas básicas sin necesidad de una tarjeta gráfica dedicada.

!!! question "A201(CE2, CE5) Características de CPUs"

    Atendiendo a la información anterior, obtén las características del procesador de tu ordenador de clase, y comparalo con:

     Característica             | AMD Ryzen 9 7945HX | Intel Core i9-13900K |  Ryzen 9 9950X| Core i9-14900K | Apple M2 Ultra| Snapdragon X Elite (X1E-84-100)|
    |----------------------------|-------------------|-----------------------|--------------------|----------------------|--|--|
    | **Arquitectura**          |                   |                       |                    |                      |  |  |
    | **Frecuencia reloj base**  |                   |                       |                    |                      |  |  |
    | **Frecuencia turbo**       |                   |                       |                    |                      |  |  |  
    | **Número de núcleos por tipo**      |                   |                       |                    |                      |  |  |  
    | **Hilos**                  |                   |                       |                    |                      |  |  |  
    | **Caché**                  |                   |                       |                    |                      |  |  |  
    | **Tecnología fabricación** |                   |                       |                    |                      |  |  |  
    | **TDP**                    |                   |                       |                    |                      |  |  |  
    | **Desktop/Mobile**          |                   |                       |                    |                      |  |  |  
    | **Compatibilidad RAM**     |                   |                       |                    |                      |  |  |  
    | **GPU**                    |                   |                       |                    |                      |  |  |  
    | **Otra información**       |                   |                       |                    |                      |  |  |  

    Puedes hacer uso de los siguientes enlaces:

    - [Intel](https://www.intel.la/content/www/xl/es/products/details/processors.html)
    - [AMD](https://www.amd.com/es/products/specifications/processors.html)
    - [Intel+AMD](https://www.techpowerup.com/cpu-specs/)
    - [Apple+Qualcomm](https://www.notebookcheck.net/)
    - [Apple](https://www.apple.com/es/newsroom/2023/06/apple-introduces-m2-ultra/)
    - [Qualcomm](https://www.qualcomm.com/laptops/products/snapdragon-x-elite)