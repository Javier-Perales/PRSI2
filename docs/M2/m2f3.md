---
title: Sprint3. Arquitectura de red
description: En este sprint se trabajará conceptos de direccionamiento IP, puertos y servicios que son necesarios para el diseño y configuración de RAL.
---

En este sprint presentaremos los protocolos de comunicación que permiten la interconexión en Internet y que constituyen la base de la mayoría de las redes locales. Comprender el funcionamiento de la **pila TCP/IP** es fundamental para ser capaces de analizar las características de las redes existentes y conectarlas de manera segura. Estos conocimientos nos permitirán diseñar y configurar el direccionamiento lógico y la infraestructura de red de la situación de aprendizaje anterior, así como desplegar los servicios en red necesarios para el funcionamiento de nuestra empresa de IA.

## 1. Protocolo TCP/IP

![Modelo TCP/IP](./assets/modelotcpip.jpg){.center width="60%"}

[Fuente:ccnadesdesdecero.com](https://ccnadesdecero.es/que-es-tcp-ip/)

El **modelo TCP/IP** es un conjunto de protocolos de comunicación que se utilizan para interconectar dispositivos en Internet. Este modelo se compone de cuatro capas: la capa de aplicación, la capa de transporte, la capa de Internet y la capa de interfaz de red. Cada capa tiene funciones específicas y protocolos asociados que permiten la comunicación entre dispositivos.

**Internet es un conjunto de redes interconectadas y hetereogeneas**, lo que significa que cada red puede tener su propia arquitectura y protocolos de comunicación. **El éxito del modelo TCP/IP radicó en su capacidad de homogeneizar la comunicación** entre estas redes, permitiendo que dispositivos alojados en redes con arquitecturas diferentes pudieran comunicarse entre sí.

### 1.1 Capa de interfaz de red

Es la capa más baja del modelo TCP/IP y se encarga de la transmisión de datos a través de la red física. Estrictamente hablando, esta capa no forma parte del modelo TCP/IP, ya que contiene las características específicas de cada red física.

En el caso de las redes locales, el protocolo más comúnmente utilizado en esta capa es el **Ethernet**, que define el formato de los paquetes de datos y las reglas para su transmisión a través de la red. 

El direccionamiento de los equipos que forman parte de la red local se realiza mediante **direcciones MAC**, que son identificadores únicos asignados a cada dispositivo por el fabricante. Estas direcciones se utilizan para dirigir los paquetes de datos a su destino dentro de la red local.

Esta dirección es un identificador de 48 bits que se asigna a cada dispositivo de red y se utiliza para la comunicación a nivel de enlace de datos dentro de la red local.

La dirección MAC se representa comúnmente en formato hexadecimal, dividida en seis grupos de dos dígitos separados por dos puntos (por ejemplo, `00:1A:2B:3C:4D:5E`). Las primeras tres partes de la dirección MAC identifican al fabricante del dispositivo, mientras que las últimas tres partes son un identificador único asignado por el fabricante.

No existe en el mundo dos tarjetas de red con la misma dirección MAC, lo que garantiza que cada dispositivo en una red local pueda ser identificado de manera única.

Para entender mejor la diferencia entre la dirección MAC y la dirección IP, podemos decir que la dirección MAC es como el número de bastidor de un coche, que es único para cada vehículo, mientras que la dirección IP es como la matrícula del coche, que puede cambiar dependiendo de dónde se encuentre el vehículo.

### 1.2 Capa de Internet

El protocolo más importante en esta capa es el **Protocolo de Internet (IP)**, que se encarga de la dirección y el enrutamiento de los paquetes de datos a través de la red. **El protocolo IP utiliza direcciones IP** para identificar los dispositivos en la red y dirigir los paquetes de datos a su destino.

La comunicación entre dispositivos de distintas redes se realiza por medio de un proceso llamado **[encapsulación](https://www.youtube.com/watch?v=7yeC5ohURAg)**, en el que los datos se envían a través de la red local utilizando direcciones MAC, y luego se encapsulan en paquetes IP para ser enviados a través de Internet.

#### 1.2.1 Estructura de una dirección IP

!!! info ""

    La dirección IP es el identificador de cada host dentro de su red de redes. Cada host conectado a una red tiene una
    dirección IP asignada, la cual debe ser distinta a todas las demás direcciones que estén vigentes en ese momento en
    el conjunto de redes visibles por el host. **En el caso de Internet, no puede haber dos ordenadores con 2 direcciones IP
    (públicas) iguales**. Pero **sí podríamos tener dos ordenadores con la misma dirección IP siempre y cuando pertenezcan
    a redes privadas independientes entre sí** (sin ningún camino posible que las comunique)

Las **direcciones IP están formadas por 4 bytes (32 bits)**. Se suelen representar de la forma `a.b.c.d` donde cada una de
estas letras representa un byte (8 bits) y su valor puede ir de `0` a `255`.

Se clasifican en clases (A, B, C, D y E) según el rango de direcciones que abarcan. Las clases A, B y C son las utilizadas para redes privadas y públicas.

Para identificar a qué clase pertenece una IP, nos debemos fijar en que los primeros bits del primer byte.

![Identificar la clase a la que pertenece una dirección IP](./assets/ipbits.png){.center width=80%}

!!! task "Direccionamiento IP"

    1. Identifica la clase a la que pertenecen las siguientes direcciones IP:

        a. 12.168.14.255   
        b. 80.58.12.68    
        c. 172.67.14.92   
        d. 200.255.192.64   
        e. 190.72.90.0    

    2. Completa la siguiente tabla indicando el rango de direcciones IP disponibles para cada una de las clases A, B y C:

    | Clase   | Desde        | Hasta            |
    |---------|--------------|------------------|
    | Clase A |               |       |
    | Clase B |              |        |
    | Clase C |         |         |

#### 1.2.2 Identificador de red y de host

Todas las direcciones IP tienen dos partes diferenciadas: el identificador de red y el identificador de host. La
separación entre ambas partes viene dada por la **máscara de subred**. La máscara de subred es una dirección IP que indica qué parte de la dirección IP corresponde a la red y qué parte corresponde al host.

!!! info ""

    Por cada dirección IP, existen dos partes diferenciadas:

    - **Identificador de red**: Permite identificar a la red a la que pertenece el dispositivo.
    - **Identificador de host**: Permite identificar al dispositivo dentro de la red.

La máscara de red se representa de la misma forma que una dirección IP, es decir, con 4 bytes separados por puntos. Los bits
de la máscara que están en `1` indican la parte de la dirección IP que corresponde a la red, mientras que los bits en `0` indican la parte que corresponde al host.

Normalmente, podemos encontrarla representada de dos formas:

- Notación decimal con puntos: `255.255.255.0` En este caso los primeros 3 bytes están en `1` y el último en `0`, por lo que los primeros 24 bits corresponden a la red y los últimos 8 bits al host.
- Notación CIDR (Classless Inter-Domain Routing): `/24` En este caso, el número indica la cantidad de bits que corresponden a la red. En este caso, los primeros 24 bits corresponden a la red y los últimos 8 bits al host.

!!! task "Identificador de red y host"

    Dadas las siguientes direcciones IP y sus respectivas máscaras, indica cuál es el identificador de red y cuál es el identificador de host:

    | # | Dirección IP        | Máscara de Red     | Identificador de Red (Net ID) | Identificador de Host (Host ID) |
    |---|---------------------|--------------------|-------------------------------|---------------------------------|
    | 1 | 192.168.1.15        | 255.255.255.0      |                               |                                 |
    | 2 | 10.0.0.42           | 255.0.0.0          |                               |                                 |
    | 3 | 172.16.5.100        | 255.255.0.0        |                               |                                 |
    | 4 | 192.168.100.2       | 255.255.255.0      |                               |                                 |
    | 5 | 8.8.8.8             | 255.0.0.0          |                               |                                 |
    | 6 | 172.31.0.1          | /16                |                               |                                 |
    | 7 | 192.168.0.254       | /24                |                               |                                 |
    | 8 | 10.25.50.75         | /8                 |                               |                                 |
    | 9 | 172.20.200.10       | /16                |                               |                                 |
    |10 | 192.0.2.1           | /24          |                               |                                 |


!!! note "Direccionamiento de equipos de red"

    Relaciona cada dirección IP con la red a la que pertenece. Habrá direcciones IP que no pertenezcan a ninguna de las redes indicadas, en cuyo caso habrá que obtener el identificador de red correspondiente. 

    | Columna A: Direcciones IP (Dispositivos) | Columna B: Identificadores de Red |
    |----------------------------------------|----------------------------------|
    | 1. 192.168.1.15 /24                    | A. 10.0.0.0 /8                  |
    | 2. 172.16.50.4 /16                     | B. 192.168.1.0 /24               |
    | 3. 10.1.1.100 /8                       | C. 172.16.0.0/16                 |
    | 4. 192.168.1.200 /16                   | D. 192.168.50.0 /24               |
    | 5. 172.16.1.25 /24                     | E. 172.20.0.0                 |
    | 6. 10.254.254.254 /16                  | F. 10.0.0.0 /16                |
    | 7. 192.168.1.45 /24                    |                                  |
    | 8. 172.16.100.1 /24                    |                                  |
    | 9. 10.0.0.5 


#### 1.2.3 Direcciones especiales

Existen ciertas direcciones IP que tienen un significado especial y no pueden ser asignadas a dispositivos en una red. Algunas de estas direcciones son:

- **Dirección de red**: Es la primera dirección de una red y se utiliza para identificar la red en sí misma. Por ejemplo, en la red `172.16.14.214/16`, la dirección de red es `172.16.0.0`. La parte de la IP que corresponde al host es `0`.
- **Dirección de broadcast**: Es la última dirección de una red y se utiliza para enviar mensajes a todos los dispositivos de la red. Por ejemplo, en la red `172.16.14.214/16`, la dirección de broadcast es `172.16.255.255`. La parte de la IP que corresponde al host es `255`.


!!! task "Número de equipos en una red"

    Obtén el número de equipos que se pueden direccionar en las siguientes redes. Recuerda que no se pueden utilizar la dirección de red ni la de broadcast. Por ejemplo, en la red `192.168.100.0` se puede direccionar a 254 equipos (256 - 2), desde la `192.168.100.1` hasta la `192.168.100.254`

    | Dirección IP / Prefijo | Identificador de red | Dirección broadcast | IP de inicio | IP final | Nº de hosts |
    |-----------------------|----------------------|---------------------|--------------|----------|-------------|
    | 192.168.1.15 /24      | 192.168.1.0          | 192.168.1.255       | 192.168.1.1  | 192.168.1.254 | 254 |
    | 172.16.50.4 /16       |                      |                     |               |         |  |
    | 10.1.1.100 /8         |                      |                     |               |         |  |
    | 192.168.1.200 /24     |                      |                     |               |         |  |
    | 172.16.0.25 /16       |                      |                     |               |         |  |
    | 10.254.254.254 /8     |                      |                     |               |         |  |
    | 192.168.1.45 /24      |                      |                     |               |         |  |
    | 172.16.100.1 /16      |                      |                     |               |         |  |
    | 10.0.0.5 /8           |                      |                     |               |         |  |
    | 192.168.1.1 /24       |                      |                     |               |         |  |
    /16                        |                                  |
        | 10. 192.168.2.1 /24                   |                                  |

## 1.2.4 Configuración entorno de red

Todos los entornos de red necesitan los siguientes parámetros para funcionar correctamente:

- **Dirección IP del dispositivo**.
- **Máscara de red**.
- **Puerta de enlace predeterminada**.
- **Servidores DNS (Domain Name System)**.

La **dirección IP y la máscara de red** permiten al dispositivo comunicarse con otros dispositivos. Si la configuración de estos parámetros es incorrecta, aunque el dispositivos esté físicamente conectado a la red, no podrá comunicarse con el resto de equipos.

La **Puerta de enlace o *Gateway*** se refiere a la IP del dispositivo de red que permite a la red local comunicarse con otras redes, como Internet. La puerta de enlace es el router que conecta la red local con el proveedor de servicios de Internet (ISP)

**Servidores DNS (Domain Name System)**. Los servidores DNS son los encargados de traducir los nombres de dominio (como www.ejemplo.com) en direcciones IP. Si no se configuran correctamente, el dispositivo no podrá resolver nombres de dominio y no podrá acceder a sitios web utilizando sus nombres. Existen servidores DNS públicos como los de Google (8.8.8.8 y 8.8.4.4).

Para direccionar redes locales, se utilizan direcciones **IP privadas**, que no se utilizan en Internet. Estas direcciones IP privadas pertenecen a los siguientes rangos:

- Clase A: `10.0.0.0/8`
- Clase B: `172.16.0.0/16` a `172.31.0.0/16`
- Clase C: `192.168.0.0/24`a `192.168.255.0/24`

!!! task "Direcciones IP privadas"

    Responde a las siguientes preguntas:

    1. ¿Cuántas redes privadas de cada clase existen? ¿Cuántos hosts se pueden direccionar en cada una de estas redes privadas?
    2. ¿Por cada una de las redes de clase A, cuántas redes de clase B y de clase C se pueden crear? ¿Cuántos hosts se pueden direccionar en cada una de estas redes?
    3. ¿Por cada una de las redes de clase B, cuántas redes de clase C se pueden crear? ¿Cuántos hosts se pueden direccionar en cada una de estas redes?

<!--
!!! task "A203(CE1)- Configuración de parámetros de red"

    Como Agentes Digitalizadores de empresas, debéremos asegurarnos de que los dispositivos de red estén correctamente configurados para garantizar una conectividad óptima.

    1. Suponiendo que cada miembro de vuestro equipo de trabajo tiene un PC, configura el entorno de red de cada uno de ellos en los siguientes casos (IP, Máscara de red, Puerta de enlace, Servidores DNS). En cada uno de los casos, la puerta de enlace será la última dirección IP utilizable de la red (por ejemplo, en la red `172.16.0.0/16`, la puerta de enlace sería `172.16.255.254`).

        a. `192.168.x.0/24` (donde `x` es el número de equipo del agente digitalizador, por ejemplo, si eres el agente 3, tus equipos estarán en la red 192.168.3.0/24)

        b. `172.16.x.0/16` (donde `x` es el número de equipo del agente digitalizador)

        c. `10.x.10.0/24` (donde `x` es el número de equipo del agente digitalizador e `y` vale 1 para el director de comunicación, 2 para el responsable de marketing y 3 para el responsable de ventas)
    
    2. Indica en cada uno de los casos anteriores, si la red de tu grupo sería visible desde la red de otro grupo. Justifica la respuesta.
-->

### 1.3 Capa de transporte

### 1.4 Capa de aplicación



## 2. Direccionamiento IP

## 3. Puertos y servicios

